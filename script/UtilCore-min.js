var BrowserUtil={isIE:function(){return-1==navigator.userAgent.indexOf("Firefox")&&-1==navigator.userAgent.indexOf("Chrome")},getAppName:function(){var e=navigator.appVersion;parseFloat(e);navigator.userAgent.indexOf("Firefox")},getAppVer:function(){navigator.appName;return navigator.appVersion.split(";")[1].replace(/[ ]/g,"")}};function Collection(){this.elements=[],Collection.prototype.size=function(){return this.elements.length},Collection.prototype.has=function(e){for(var t=0;t<this.elements.length;t++)if(this.elements[t].key==e)return!0;return!1},Collection.prototype.remove=function(e){for(var t=0;t<this.elements.length;t++)if(this.elements[t].key==e)return this.elements.splice(t,1),!0;return!1},Collection.prototype.set=function(e,t){return!this.has(e)&&(this.elements.push({key:e,value:t}),!0)},Collection.prototype.get=function(e){for(var t=0;t<this.elements.length;t++)if(this.elements[t].key==e)return this.elements[t].value;return null},Collection.prototype.item=function(e){return e<this.elements.length?this.elements[e].value:null},Collection.prototype.clear=function(){for(;0<this.elements.length;)this.elements.shift()}}function DataSet(){this.values=[],DataSet.prototype.size=function(){return this.values.length},DataSet.prototype.has=function(e){for(var t=0;t<this.values.length;t++)if(this.values[t]==e)return!0;return!1},DataSet.prototype.get=function(e){return e<this.size()&&0<=e?this.values[e]:null},DataSet.prototype.remove=function(e){for(var t=0;t<this.values.length;t++)if(this.values[t]==e)return this.values.splice(t,1),!0;return!1},DataSet.prototype.add=function(e){return!this.has(e)&&(this.values.push(e),!0)},DataSet.prototype.clear=function(){for(var e=0;e<this.values.length;e++)this.remove(this.values[e])}}String.prototype.trim=function(){var e=this;whitespace=" \n\r\t\f\v            ​\u2028\u2029 u3000";var t=0;for(e.length;t=0;t--)if(-1===whitespace.indexOf(e.charAt(t))){e=e.substring(0,t,1);break}return-1===whitespace.indexOf(e.charAt(0))?e:""};var EventUtil={add:function(e,t,a,r){e.addEventListener?e.addEventListener(t,a,r):e.attachEvent?e.attachEvent("on"+t,a):e["on"+t]=a},throttle:function(r,s,n){var i,l=+Date.now();return function(){var e=this,t=arguments,a=+Date.now();clearTimeout(i),n<=a-l?(r.apply(e,t),l=a):i=setTimeout(function(){r.apply(e,t)},s)}}},NumUtil={trimBigNum:function(e,t){return 1e8<=e?(e/1e9).toFixed(2)+"B":1e5<=e?(e/1e6).toFixed(2)+"M":1e3<=e?(e/1e3).toFixed(2)+"K":e.toFixed(t)}},ClassUtil={has:function(e,t){var a=new RegExp("(\\s+|^)"+t+"(\\s+|$)");return 0<=e.className.search(a)},add:function(e,t){e.classList?e.classList.add(t):ClassUtil.has(e,t)||(e.className=e.className+" "+t)},remove:function(e,t){if(ClassUtil.has(e,t)){var a=new RegExp("(\\s+|^)"+t+"(\\s+|$)");e.className=e.className.replace(a," ")}},toggle:function(e,t){ClassUtil.has(e,t)?ClassUtil.remove(e,t):ClassUtil.add(e,t)}},StyleUtil={has:function(e,t){var a=new RegExp("(;\\s*|\\s+|^)"+t+"\\s*:","i");return 0<=e.style.cssText.search(a)},set:function(e,t,a){try{e.style.setProperty?e.style.setProperty(t,a):StyleUtil.has(e,t)?(StyleUtil.del(e,t),e.style.cssText=e.style.cssText+";"+t+":"+a+";"):0==e.style.cssText.length?e.style.cssText=t+":"+a+";":e.style.cssText=e.style.cssText.trim()+";"+t+":"+a+";"}catch(e){console.log("Fail to set style: "+t+":"+a),console.log(e)}},get:function(e,t){if(e.style.getPropertyValue)return e.style.getPropertyValue(t);var a=new RegExp("(;\\s*|\\s+|^)"+t+"\\s*:[^\n\r;]+(;|$)","i"),r=e.style.cssText.match(a)[0].split(":")[1].replace(";","");return r=r.replace(/\s*/g,"")},del:function(e,t){if(StyleUtil.has(e,t)){var a=new RegExp("(;\\s*|\\s+|^)"+t+"\\s*:[^\n\r;]+(;|$)","i");e.style.cssText=e.style.cssText.replace(a," ")}}},MouseUtil={getEventPosition:function(e){e=e||window.event;var t=0,a=0;try{t=e.offsetX,a=e.offsetY}catch(e){console.log("Fail to get Mouse position:"),console.log(e)}return{x:t,y:a}},getLayerPosition:function(e){e=e||window.event;var t=0,a=0;try{!e.layerX&&0!=e.layerX||(t=e.layerX,a=e.layerY)}catch(e){console.log("Fail to get Mouse position:"),console.log(e)}return{x:t,y:a}}},DateUtil={getDate:function(e){if(e.getFullYear)return new Date(e);var t=null,a=null;if(0<=e.indexOf("/")?t=e.split("/"):0<=e.indexOf(".")?t=e.split("."):0<=e.indexOf("-")&&(t=e.split("-")),3==t.length){var r=t[0],s=t[1],n=t[2];1e3<=r&&r<=3e3&&0<=n&&1<=s&&s<=12&&(1==s||3==s||5==s||7==s||8==s||10==s||12==s?n<=31&&(a=new Date(r,s-1,n)):4==s||6==s||9==s||11==s?n<=30&&(a=new Date(r,s-1,n)):2==s&&(r%4==0&&0<r%100||r%400==0?n<=29&&(a=new Date(r,s-1,n)):n<=28&&(a=new Date(r,s-1,n))))}return a},getWeekName:function(e,t){if("www"==t)switch(e%7){case 0:return"Sun";case 1:return"Mon";case 2:return"Tue";case 3:return"Wed";case 4:return"Thr";case 5:return"Fri";case 6:return"Sat"}else if("wwww"==t)switch(e%7){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday"}},format:function(e,t){if(this.date=DateUtil.getDate(e),!this.date)return"";this.year=this.date.getFullYear(),this.month=this.date.getMonth()+1,this.day=this.date.getDate(),this.formula=t.toLowerCase();var a=this.formula;if(0<=this.formula.indexOf("yyyy")?a=a.replace("yyyy",this.year):0<=t.indexOf("yy")&&(a=a.replace("yy",this.year.toString().slice(2,4))),0<=this.formula.indexOf("mmmm")){var r="";switch(this.month){case 1:r="January";break;case 2:r="February";break;case 3:r="March";break;case 4:r="April";break;case 5:r="May";break;case 6:r="June";break;case 7:r="July";break;case 8:r="August";break;case 9:r="September";break;case 10:r="October";break;case 11:r="November";break;case 12:r="December"}a=a.replace("mmmm",r)}else if(0<=this.formula.indexOf("mmm")){r="";switch(this.month){case 1:r="Jan";break;case 2:r="Feb";break;case 3:r="Mar";break;case 4:r="Apr";break;case 5:r="May";break;case 6:r="Jun";break;case 7:r="Jul";break;case 8:r="Aug";break;case 9:r="Sep";break;case 10:r="Oct";break;case 11:r="Nov";break;case 12:r="Dec"}a=a.replace("mmm",r)}else 0<=this.formula.indexOf("mm")?2==this.month.toString().length?a=a.replace("mm",this.month):this.month.toString().length<=1&&(a=a.replace("mm","0"+this.month)):0<=t.indexOf("m")&&(a=a.replace("m",this.month));return 0<=this.formula.indexOf("dd")?2==this.day.toString().length?a=a.replace("dd",this.day):this.day.toString().length<=1&&(a=a.replace("dd","0"+this.day)):0<=this.formula.indexOf("d")&&(a=a.replace("m",this.day)),a},getWeekStartDay:function(e){if(this.date=DateUtil.getDate(e),!this.date)return null;var t=new Date(this.date),a=t.getDay()||7;return t.setDate(t.getDate()-a+1),t},getWeekEndDay:function(e){if(this.date=DateUtil.getDate(e),!this.date)return null;var t=new Date(this.date);return(t=DateUtil.getWeekStartDay(this.date)).setDate(t.getDate()+6),t},getMonthStartDay:function(e){if(this.date=DateUtil.getDate(e),!this.date)return null;var t=new Date(this.date);return t.setDate(1),t},getMonthEndDay:function(e){return this.date=DateUtil.getDate(e),this.date?(tmpDate=new Date(this.date.getFullYear(),this.date.getMonth()+1,0),tmpDate):null},get10YearsStart:function(e){if(e.getFullYear()%10)var t=e.getFullYear()-e.getFullYear()%10;else t=e.getFullYear()-10;return t}};