sr.ImgLazyLoad=function(l,o){for(var i=[],t=document.querySelectorAll("img"),e=0;e<t.length;e++)i[e]=t[e],t[e].className="lazy-img-pre";function r(){for(var t=0;t<i.length;t++){var e=i[t],r=e.offsetTop-l;if(r<0&&(r=0),!(r<(document.body.scrollTop||document.documentElement.scrollTop)+window.innerHeight))break;var s=e.getAttribute("data-src");e.getAttribute("src")||(e.setAttribute("src",s),sr.EventUtil.add(e,"error",sr.EventUtil.throttle(function(t){"lazy-img-err"!=this.className&&(this.className="lazy-img-err",this.src=o||"")},100,500)))}}sr.EventUtil.add(document,"scroll",sr.EventUtil.throttle(r,100,100)),r()};
sr.TreeMenuNode=function(e,t,o){this.NodeId=t.PageId,this.PageHtml=document.getElementById(this.NodeId)||null,this.Level=e,this.Link=t.link||null,this.Parent=o,this.ChildNode=[];var l,n=document.createElement("li");(n.className="tree-menu-li",this.Html=n,this.Parent.Html.appendChild(n),e<=2)?(l=document.createElement("h"+(e+1))).className="tree-menu-h"+(e+1):(l=document.createElement("h4")).className="tree-menu-h4";n.appendChild(l);var r=document.createElement("a");r.className="tree-menu-a",r.innerHTML=t.name,r.setAttribute("data-title",this.NodeId),this.Link&&r.setAttribute("href",this.Link),l.appendChild(r),this.TitleHtml=r;var i,s=this;if(sr.TreeMenuNode.prototype.scrollAnimate=function(e,t){t=t||80,e<0&&(e=0),e>document.body.scrollHeight-document.documentElement.clientHeight&&(e=document.body.scrollHeight-document.documentElement.clientHeight);var o=document.body.scrollTop||document.documentElement.scrollTop;t<o-e?(document.body.scrollTop-=t,document.documentElement.scrollTop-=t):t<e-o?(document.body.scrollTop+=t,document.documentElement.scrollTop+=t):(clearInterval(i),document.body.scrollTop=e,document.documentElement.scrollTop=e,s.Parent.setClick(!1))},sr.TreeMenuNode.prototype.Offset=function(){return this.Parent.Offset()},sr.TreeMenuNode.prototype.setClick=function(e){this.Parent.setClick(e)},sr.TreeMenuNode.prototype.active=function(e){this.TitleHtml.className=e?"tree-menu-a highlight":"tree-menu-a"},sr.TreeMenuNode.prototype.scrollPage=function(){var e=this.scrollAnimate,t=this.PageHtml.offsetTop-this.Offset(),o=document.body.scrollTop||document.documentElement.scrollTop,l=Math.abs(o-t)/20;this.Parent.setClick(!0),i=setInterval(function(){e(t,l)},1)},sr.TreeMenuNode.prototype.addScrollNode=function(e){this.Parent.addScrollNode(e)},this.PageHtml&&this.addScrollNode(this),t.list){var c=document.createElement("ul");c.className="tree-menu-ul",this.Html.appendChild(c);for(var d=0;d<t.list.length;d++){var a=new sr.TreeMenuNode(e+1,t.list[d],this);this.ChildNode.push(a),c.appendChild(a.Html)}}},sr.TreeMenu=function(e,t,o,l){this.NodeList=[],this.ScrollNode=[],this.HighlightNode=null,this.ScrollOffset=o||0,this.Parent=e,this.Top=l||40,this.isClick=!1,t=t||[],e.className="tree-menu",sr.StyleUtil.set(e,"display","none");var n=document.createElement("ul");n.className="tree-menu-ul",this.Html=n,e.appendChild(n);var i=this;sr.TreeMenu.prototype.addScrollNode=function(e){this.ScrollNode.push(e)},sr.TreeMenu.prototype.Offset=function(){return this.ScrollOffset},sr.TreeMenu.prototype.setClick=function(e){this.isClick=e};for(var r=0;r<t.length;r++){var s=new sr.TreeMenuNode(1,t[r],this);this.NodeList.push(s),n.appendChild(s.Html)}sr.TreeMenu.prototype.anchorPage=function(){if(!i.isClick)for(var e=i.ScrollNode,t=0;t<e.length;t++){var o=e[t],l=0;l=t<e.length-1?e[t+1].PageHtml.offsetTop-i.Offset():document.body.scrollHeight||document.documentElement.scrollHeight;var n=o.PageHtml.offsetTop-i.Offset();(n<0||0==t)&&(n=0);var r=document.body.scrollTop||document.documentElement.scrollTop;if(n<=r&&r<l){i.HighlightNode&&i.HighlightNode.active(!1),o.active(!0),i.HighlightNode=o;break}}},sr.EventUtil.add(document,"scroll",sr.EventUtil.throttle(i.anchorPage,100,100)),sr.EventUtil.add(window,"scroll",sr.EventUtil.throttle(i.anchorPage,100,100)),sr.EventUtil.add(n,"click",function(e){var t=e||window.event,o=t.srcElement||t.target;if("a"==o.nodeName.toLowerCase())for(var l=o.getAttribute("data-title"),n=i.ScrollNode,r=0;r<n.length;r++)if(n[r].NodeId==l){n[r].scrollPage();break}}),sr.EventUtil.add(window,"resize",function(){sr.StyleUtil.set(i.Parent,"height",document.documentElement.clientHeight-i.Top+"px")}),sr.StyleUtil.set(e,"height",document.documentElement.clientHeight-i.Top+"px"),sr.StyleUtil.del(e,"display"),this.anchorPage()};