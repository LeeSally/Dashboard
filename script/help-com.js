sr.ImgLazyLoad=function(l,o){for(var i=[],t=document.querySelectorAll("img"),e=0;e<t.length;e++)i[e]=t[e],t[e].className="lazy-img-pre";function r(){for(var t=0;t<i.length;t++){var e=i[t],r=e.offsetTop-l;if(r<0&&(r=0),!(r<(document.body.scrollTop||document.documentElement.scrollTop)+window.innerHeight))break;var s=e.getAttribute("data-src");e.getAttribute("src")||(e.setAttribute("src",s),sr.EventUtil.add(e,"error",sr.EventUtil.throttle(function(t){"lazy-img-err"!=this.className&&(this.className="lazy-img-err",this.src=o||"")},100,500)))}}sr.EventUtil.add(document,"scroll",sr.EventUtil.throttle(r,100,100)),r()};
sr.TreeMenuNode=function(e,t,l){this.NodeId=t.PageId,this.ActionType=t.ActionType||"slide",this.PageHtml=document.getElementById(this.NodeId)||null,this.Level=e,this.Link=t.link||null,this.Parent=l,this.ChildNode=[],this.ChildList=null;var o,i=document.createElement("li");(i.className="tree-menu-li",this.Html=i,this.Parent.Html.appendChild(i),e<=2)?(o=document.createElement("h"+(e+1))).className="tree-menu-h"+(e+1):(o=document.createElement("h4")).className="tree-menu-h4";"fold"==this.ActionType&&(o.className=o.className+" tree-menu-h"),i.appendChild(o);var n=document.createElement("a");"fold"==this.ActionType?n.className="tree-menu-a2 tree-menu-a2-down":n.className="tree-menu-a",n.innerHTML=t.name,n.setAttribute("data-title",this.NodeId),this.Link&&n.setAttribute("href",this.Link),o.appendChild(n),this.TitleHtml=n;var s,r=this;if(sr.TreeMenuNode.prototype.toggleChildren=function(){var e=this.ChildList;e&&("none"===sr.StyleUtil.get(e,"display")?(this.TitleHtml.className="tree-menu-a2 tree-menu-a2-down",sr.StyleUtil.del(e,"display")):(this.TitleHtml.className="tree-menu-a2 tree-menu-a2-up",sr.StyleUtil.set(e,"display","none")))},sr.TreeMenuNode.prototype.scrollAnimate=function(e,t){t=t||80,e>document.body.scrollHeight-document.documentElement.clientHeight&&(e=document.body.scrollHeight-document.documentElement.clientHeight),e<0&&(e=0);var l=document.body.scrollTop||document.documentElement.scrollTop;t<l-e?(document.body.scrollTop-=t,document.documentElement.scrollTop-=t):t<e-l?(document.body.scrollTop+=t,document.documentElement.scrollTop+=t):(clearInterval(s),document.body.scrollTop=e,document.documentElement.scrollTop=e,r.Parent.setClick(!1))},sr.TreeMenuNode.prototype.Offset=function(){return this.Parent.Offset()},sr.TreeMenuNode.prototype.setClick=function(e){this.Parent.setClick(e)},sr.TreeMenuNode.prototype.active=function(e){e?"slide"==this.ActionType?this.TitleHtml.className="tree-menu-a highlight":"fold"==this.ActionType&&(this.TitleHtml.className="tree-menu-a2 highlight"):"slide"==this.ActionType?this.TitleHtml.className="tree-menu-a":"fold"==this.ActionType&&(this.TitleHtml.className="tree-menu-a2")},sr.TreeMenuNode.prototype.scrollPage=function(){var e=this.scrollAnimate,t=this.PageHtml.offsetTop-this.Offset(),l=document.body.scrollTop||document.documentElement.scrollTop,o=Math.abs(l-t)/20;this.Parent.setClick(!0),s=setInterval(function(){e(t,o)},1)},sr.TreeMenuNode.prototype.addScrollNode=function(e){this.Parent.addScrollNode(e)},this.PageHtml&&this.addScrollNode(this),t.list){var d=document.createElement("ul");d.className="tree-menu-ul",this.Html.appendChild(d),this.ChildList=d;for(var c=0;c<t.list.length;c++){var a=new sr.TreeMenuNode(e+1,t.list[c],this);this.ChildNode.push(a),d.appendChild(a.Html)}}},sr.TreeMenu=function(e,t,l,o){this.ChildNode=[],this.ScrollNode=[],this.HighlightNode=null,this.ScrollOffset=l||0,this.Parent=e,this.Top=o||40,this.isClick=!1,t=t||[],e.className="tree-menu",sr.StyleUtil.set(e,"display","none");var i=document.createElement("ul");i.className="tree-menu-ul",this.Html=i,e.appendChild(i);var r=this;sr.TreeMenu.prototype.addScrollNode=function(e){this.ScrollNode.push(e)},sr.TreeMenu.prototype.Offset=function(){return this.ScrollOffset},sr.TreeMenu.prototype.setClick=function(e){this.isClick=e};for(var n=0;n<t.length;n++){var s=new sr.TreeMenuNode(1,t[n],this);this.ChildNode.push(s),i.appendChild(s.Html)}sr.TreeMenu.prototype.anchorPage=function(){if(!r.isClick)for(var e=r.ScrollNode,t=0;t<e.length;t++){var l=e[t];if(0!=l.PageHtml.offsetHeight){var o=0;o=t<e.length-1?e[t+1].PageHtml.offsetTop-r.Offset():document.body.scrollHeight||document.documentElement.scrollHeight;var i=l.PageHtml.offsetTop-r.Offset();(i<0||0==t)&&(i=0);var n=document.body.scrollTop||document.documentElement.scrollTop;if(i<=n&&n<o){r.HighlightNode&&r.HighlightNode.active(!1),l.active(!0),r.HighlightNode=l;break}}}},sr.EventUtil.add(document,"scroll",sr.EventUtil.throttle(r.anchorPage,100,100)),sr.EventUtil.add(window,"scroll",sr.EventUtil.throttle(r.anchorPage,100,100)),sr.EventUtil.add(i,"click",function(e){var t=e||window.event,l=t.srcElement||t.target;if("a"==l.nodeName.toLowerCase())for(var o=l.getAttribute("data-title"),i=r.ScrollNode,n=0;n<i.length;n++)if(i[n].NodeId==o){var s=i[n];"slide"==s.ActionType?s.scrollPage():"fold"==s.ActionType&&s.toggleChildren();break}}),sr.EventUtil.add(window,"resize",function(){sr.StyleUtil.set(r.Parent,"height",document.documentElement.clientHeight-r.Top+"px")}),sr.StyleUtil.set(e,"height",document.documentElement.clientHeight-r.Top+"px"),sr.StyleUtil.del(e,"display"),this.anchorPage()};

sr.ScrollBar={add:function(t,e,l){new scrollBarY(t,e)}},sr.scrollBarY=function(a,t,e){this.box=document.createElement("div"),this.bar=document.createElement("div"),this.page=a,t=t||a.offsetTop,e=e||this.page.offsetWidth+this.page.offsetLeft-6,sr.StyleUtil.set(this.page,"overflow-y","hidden"),sr.ClassUtil.add(this.box,"scroll-bar"),sr.StyleUtil.set(this.box,"height",a.offsetHeight-2+"px"),sr.StyleUtil.set(this.box,"left",e+"px"),sr.StyleUtil.set(this.box,"top",t+"px"),a.parentNode.appendChild(this.box),sr.ClassUtil.add(this.bar,"bar"),sr.StyleUtil.set(this.bar,"height",a.offsetHeight/a.scrollHeight*a.offsetHeight+"px"),this.box.appendChild(this.bar),sr.scrollBarY.prototype.resize=function(){sr.StyleUtil.set(this.box,"height",this.page.offsetHeight+"px"),sr.StyleUtil.set(this.box,"left",this.page.offsetWidth+this.page.offsetLeft-6+"px"),sr.StyleUtil.set(this.bar,"height",this.page.offsetHeight/this.page.scrollHeight*this.page.offsetHeight+"px"),sr.StyleUtil.set(this.bar,"margin-top",this.page.scrollTop/this.page.scrollHeight*this.page.offsetHeight+"px"),this.page.offsetHeight>=this.page.scrollHeight?(sr.StyleUtil.set(this.box,"display","none"),sr.StyleUtil.set(this.bar,"display","none"),navigator.userAgent.indexOf("Firefox")):(sr.StyleUtil.set(this.box,"display","block"),sr.StyleUtil.set(this.bar,"display","block"))};var c=this,i=0;this.isClickDown=!1,sr.scrollBarY.prototype.ActivePage=null,sr.EventUtil.add(this.page,"mouseover",function(){c.ActivePage=c.page,c.resize(),sr.StyleUtil.set(c.box,"opacity",.5)}),sr.EventUtil.add(this.page,"mouseout",function(){c.isClickDown||(sr.StyleUtil.set(c.box,"opacity",0),c.ActivePage=null)}),sr.EventUtil.add(this.bar,"mousedown",function(t){c.isClickDown=!0,i=t.clientY,c.resize()}),sr.EventUtil.add(this.box,"mouseover",function(){c.ActivePage=c.page,c.resize(),sr.StyleUtil.set(this,"opacity",.8)}),sr.EventUtil.add(this.box,"mouseout",function(t){c.isClickDown||(sr.StyleUtil.set(this,"opacity",.5),c.ActivePage=null)}),sr.EventUtil.add(window,"mouseup",function(t){c.isClickDown=!1,c.resize(),sr.StyleUtil.set(c.box,"opacity",.5)}),sr.EventUtil.add(window,"mousemove",function(t){if(c.isClickDown){var e=a.scrollTop/a.scrollHeight*a.clientHeight,l=(t.clientY-i)/a.clientHeight*a.scrollHeight;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),i=(a.scrollTop+l>=a.scrollHeight-a.clientHeight?(a.scrollTop=a.scrollHeight-a.clientHeight,sr.StyleUtil.set(c.bar,"margin-top",a.scrollTop/a.scrollHeight*a.clientHeight+"px")):a.scrollTop+l<=0?(a.scrollTop=0,sr.StyleUtil.set(c.bar,"margin-top","0px")):(a.scrollTop=a.scrollTop+l,sr.StyleUtil.set(c.bar,"margin-top",e+(t.clientY-i)+"px")),t.clientY)}}),sr.EventUtil.add(this.box,"click",function(t){var e=a.scrollTop/a.scrollHeight*a.clientHeight,l=getDOMDistance(a,"top");if(t.clientY-l<e||t.clientY-l>e+c.bar.clientHeight){var i=90;t.clientY-l<e?i*=-1:t.clientY-l>e+c.bar.offsetHeight&&(i=Math.abs(i));var s=0;s=a.scrollTop+i>a.scrollHeight-a.offsetHeight?a.scrollHeight-a.offsetHeight:a.scrollTop+i<0?0:a.scrollTop+i;var o=3;20<.1*a.scrollHeight?o=20:3<.1*a.scrollHeight&&(o=.1*a.scrollHeight);var r=setInterval(function(){s>a.scrollTop?(a.scrollTop+=o,sr.StyleUtil.set(c.bar,"margin-top",a.scrollTop/a.scrollHeight*a.offsetHeight+"px"),a.scrollTop>=s&&clearInterval(r)):(a.scrollTop-=o,sr.StyleUtil.set(c.bar,"margin-top",a.scrollTop/a.scrollHeight*a.offsetHeight+"px"),a.scrollTop<=s&&clearInterval(r))},20)}}),sr.scrollBarY.prototype.isWheeling=!1;function l(t){if(c.resize(),c.page===c.ActivePage&&!c.isWheeling){t.preventDefault();var e=100;c.isWheeling=!0,t.wheelDelta?0<t.wheelDelta?e*=-1:e*=1:t.detail&&(0<t.detail?e*=1:e*=-1),c.page.scrollTop+e>=c.page.scrollHeight-c.page.offsetHeight?e=c.page.scrollHeight-c.page.offsetHeight:c.page.scrollTop+e<=0?e=0:e+=c.page.scrollTop;var l=5;10<.1*a.scrollHeight?l=10:5<.1*a.scrollHeight&&(l=.1*a.scrollHeight);var i=setInterval(function(){e>c.page.scrollTop?(c.page.scrollTop+=l,sr.StyleUtil.set(c.bar,"margin-top",c.page.scrollTop/c.page.scrollHeight*c.page.offsetHeight+"px"),c.page.scrollTop>=e&&(clearInterval(i),c.isWheeling=!1)):e<c.page.scrollTop?(c.page.scrollTop-=l,sr.StyleUtil.set(c.bar,"margin-top",c.page.scrollTop/c.page.scrollHeight*c.page.offsetHeight+"px"),c.page.scrollTop<=e&&(clearInterval(i),c.isWheeling=!1)):(clearInterval(i),c.isWheeling=!1)},15)}}sr.EventUtil.add(window,"DOMMouseScroll",l),sr.EventUtil.add(window,"mousewheel",l),sr.EventUtil.add(window,"resize",function(){c.resize()})};